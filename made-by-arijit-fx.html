<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Red Paid Push Data</title>

<!-- Google Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

<!-- 
  NOTE: The following style block is necessary for advanced animations (keyframes),
  hover effects, and responsive media queries, which cannot be inlined.
-->
<style>
  /* --- START: VIP Animation Styles --- */

  /* Keyframes for the pulsating glow effect */
  @keyframes pulsate-gold {
    0% {
      box-shadow: 0 0 8px #ffd70044, 0 0 10px #000 inset;
    }
    50% {
      box-shadow: 0 0 20px #ffd700aa, 0 0 10px #000 inset;
    }
    100% {
      box-shadow: 0 0 8px #ffd70044, 0 0 10px #000 inset;
    }
  }

  /* Keyframes for the shimmering gradient animation */
  @keyframes gradient-animation {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  /* Applying the pulsating glow to the first 10 rows */
  #table-body tr:nth-child(-n+10) {
    animation: pulsate-gold 3s infinite ease-in-out;
  }
  
  /* Applying the shimmering gradient to the VIP title */
  .vips-title-row th {
    background: linear-gradient(-45deg, #ffd700, #f0e68c, #daa520, #ffd700);
    background-size: 400% 400%;
    animation: gradient-animation 8s ease infinite;
  }
  
  /* Applying the shimmering gradient to the separator row */
  .special-layout-row td {
    height: 8px;
    padding: 0;
    border: none;
    background: linear-gradient(90deg, #121212, #ffd700, #f0e68c, #121212);
    background-size: 400% 400%;
    opacity: 0.8;
    animation: gradient-animation 6s infinite linear;
  }
  
  /* --- END: VIP Animation Styles --- */

  /* Focus effect for the search box */
  #search-box:focus {
    outline: none;
    box-shadow: 0 0 10px #64ffda;
  }
  
  /* Media queries for responsive design on smaller screens */
  @media (max-width: 768px) {
    body { padding: 10px; padding-bottom: 90px; }
    h1 { font-size: 1.8rem; }
    .vips-title-row th { font-size: 1.2rem; }
    th, td { font-size: 0.9rem; padding: 8px 4px; }
  }
</style>
</head>
<body style="background: #121212; color: #f0f0f0; font-family: 'Noto Serif', serif; padding: 15px; max-width: 1200px; margin: auto; padding-bottom: 90px;">

<h1 style="text-align: center; margin-bottom: 20px; font-size: 2.2rem; color: #64ffda; text-shadow: 0 0 12px #64ffda;">Red Paid Push Data</h1>

<div class="controls" style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; align-items: center; position: sticky; top: 0; z-index: 100; background: #121212; padding-top: 10px; padding-bottom: 10px;">
  <input type="text" id="search-box" placeholder="Search by No. or Name..." style="flex: 1; min-width: 200px; padding: 10px; border-radius: 8px; border: 1px solid #64ffda; background: #263238; color: #f0f0f0; font-size: 1rem;">
</div>

<table style="width: 100%; border-collapse: collapse; box-shadow: 0 0 20px #00000088; border-radius: 12px; overflow: hidden;">
  <thead id="main-header">
    <tr class="vips-title-row">
        <th id="vips-title-cell" style="color: #2c1e00; font-size: 1.4rem; text-shadow: 0 0 10px #ffffff88; border: none; border-top: 1px solid #64ffda; border-bottom: 1px solid #64ffda; padding: 8px 0; font-weight: 900;">üëëùêïùêàùêèùêíüëë</th>
    </tr>
  </thead>
  <tbody id="table-body"></tbody>
</table>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyChO1aC8iQLW7BbMHzEU0mJqGexo2kj0hE",
    authDomain: "red-paid-push-data.firebaseapp.com",
    databaseURL: "https://red-paid-push-data-default-rtdb.firebaseio.com",
    projectId: "red-paid-push-data",
    storageBucket: "red-paid-push-data.firebasestorage.app",
    messagingSenderId: "87626213146",
    appId: "1:87626213146:web:dd1c8575ccdaf33454aea3"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const playersRef = ref(db, "players");
  
  const styles = {
    th: {
      border: '1px solid #64ffda',
      padding: '12px 8px',
      textAlign: 'center',
      fontSize: '1rem',
      verticalAlign: 'middle',
      background: '#004d40',
      color: '#64ffda',
    },
    td: {
      border: '1px solid #64ffda',
      padding: '12px 8px',
      textAlign: 'center',
      fontSize: '1rem',
      transition: 'background-color 0.3s',
      verticalAlign: 'middle'
    }
  };

  const vipsTitleCell = document.getElementById('vips-title-cell');
  vipsTitleCell.colSpan = 3; // Always 3 for read-only mode

  // AdSense integration for public view
  const publisherId = "ca-pub-YOUR_PUBLISHER_ID"; // Replace with your actual AdSense publisher ID
  const adsenseScript = document.createElement('script');
  adsenseScript.async = true;
  adsenseScript.src = `https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${publisherId}`;
  adsenseScript.crossOrigin = 'anonymous';
  document.head.appendChild(adsenseScript);


  const tableBody = document.getElementById("table-body");

  onValue(playersRef, (snapshot) => {
    const data = snapshot.val() || {};
    renderTable(data);
    search(); 
  });

  function createHeaderRow() {
      const headerRow = document.createElement("tr");
      
      const thNo = document.createElement("th");
      Object.assign(thNo.style, styles.th, { width: '5%' });
      thNo.textContent = "No.";
      headerRow.appendChild(thNo);
      
      const thName = document.createElement("th");
      Object.assign(thName.style, styles.th);
      thName.textContent = "Player Name";
      headerRow.appendChild(thName);

      const thStars = document.createElement("th");
      Object.assign(thStars.style, styles.th, { width: '15%' });
      thStars.textContent = "Stars";
      headerRow.appendChild(thStars);

      return headerRow;
  }

  function renderTable(data) {
    const players = Object.entries(data);
    const fragment = document.createDocumentFragment();

    players.forEach(([key, player], index) => {
      const tr = document.createElement("tr");
      tr.dataset.key = key; 
      
      const tdNo = document.createElement("td");
      Object.assign(tdNo.style, styles.td);
      tdNo.textContent = index + 1;
      tr.appendChild(tdNo);

      const tdName = document.createElement("td");
      Object.assign(tdName.style, styles.td, { textAlign: 'left', color: player.color || 'inherit', fontWeight: 'bold' });
      
      if (index < 10) {
        const vipSpan = document.createElement('span');
        Object.assign(vipSpan.style, { color: '#ffd700', fontWeight: 'bold', marginRight: '8px', textShadow: '0 0 6px #ffd700' });
        vipSpan.textContent = 'üëë';
        tdName.appendChild(vipSpan);
      }
      tdName.appendChild(document.createTextNode(player.name || ""));
      tr.appendChild(tdName);

      const tdStars = document.createElement("td");
      Object.assign(tdStars.style, styles.td);
      tdStars.textContent = player.stars || 0;
      tr.appendChild(tdStars);

      fragment.appendChild(tr);

      if (index === 9 && players.length > 10) {
        const separatorTr = document.createElement("tr");
        separatorTr.className = 'special-layout-row';
        const separatorTd = document.createElement("td");
        separatorTd.colSpan = 3; // Always 3 for read-only mode
        separatorTr.appendChild(separatorTd);
        fragment.appendChild(separatorTr);

        const duplicatedHeader = createHeaderRow();
        fragment.appendChild(duplicatedHeader);
      }
    });

    tableBody.innerHTML = "";
    tableBody.appendChild(fragment);
  }

  const searchInput = document.getElementById("search-box");
  searchInput.addEventListener("input", search);

  function search() {
    const term = searchInput.value.toLowerCase();
    Array.from(tableBody.rows).forEach(row => {
      if (row.classList.contains('special-layout-row') || row.querySelector('th')) {
        row.style.display = ""; 
        return; 
      }

      const noCell = row.cells[0]; // No. is always at index 0 in read-only
      const nameCell = row.cells[1]; // Name is always at index 1 in read-only
      const no = noCell.textContent.toLowerCase();
      const name = nameCell.textContent.toLowerCase();
      const isVisible = no.includes(term) || name.includes(term);
      row.style.display = isVisible ? "" : "none";
    });
  }
</script>

</body>
</html>
